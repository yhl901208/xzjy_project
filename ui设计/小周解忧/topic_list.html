<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>话题</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=no" />
<meta name="format-detection" content="email=no" />
<link rel="stylesheet" href="./static/css/base.css">
<link rel="stylesheet" href="./static/css/flex.css">
<link rel="stylesheet/less" type="text/css" href="./static/css/app.less">
</head>
<body>
   
<!-- 话题列表页面-->
<div id="topic_list-wrap" data-role="page">
    
    <header class="top_menu_bar">
        <div class="top_menu_more">
            <div class="list_shadow"></div>
            <a href="#" class="more_btn" id="search"></a>
        </div>
        <div id="top_menu" class="top_menu_list">
            <a href="javascript:;" class="btn cur" data-id="1">爱情</a>
            <a href="javascript:;" class="btn" data-id="2">亲情</a>
            <a href="javascript:;" class="btn" data-id="3">婚姻</a>
            <a href="javascript:;" class="btn" data-id="4">暗恋</a>
            <a href="javascript:;" class="btn" data-id="5">学业</a>
            <a href="javascript:;" class="btn" data-id="6">事业</a>
            <a href="javascript:;" class="btn" data-id="7">国际</a>
            <a href="javascript:;" class="btn" data-id="8">旅游</a>
            <a href="javascript:;" class="btn" data-id="9">社会</a>
            <a href="javascript:;" class="btn" data-id="10">历史</a>
            <a href="javascript:;" class="btn" data-id="11">美食</a>
            <a href="javascript:;" class="btn" data-id="12">美文</a>
            <a href="javascript:;" class="btn" data-id="13">养生</a>
        </div>
    </header>
    
    <section class="list">
        <ul>
            <li>
                <div class="user-container" flex="main:left cross:center">
                    <img src="./static/images/imgdemo/imguser.jpg" />
                    <span class="nickname">你比想象的自由</span>
                </div>
                <div class="title">家里人不理解自己怎么办？</div>
                <div class="content">
                    <p>总是觉得家里人不支持自己，不知道该怎么办，我不知道该怎么办？求解答？</p>
                    <div class="pic-list" flex="main:left cross:center">
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                    </div>
                </div>
                <div class="count-container clearfix">
                    <span class="fl">今天10:20 · 亲情</span>
                    <span class="fr">
                        <a href="javascript:;">                    
                            <i class="icon-look"></i>                        
                            <span>28</span>                                           
                        </a> 
                        <a href="javascript:;">                    
                            <i class="icon-comment"></i>                        
                            <span>45</span>                                           
                        </a>     
                        <a href="javascript:;" style="margin-right: 0px;">                    
                            <i class="icon-xin"></i>                        
                            <span>32</span>                                           
                        </a>     
                    </span>
                </div>
            </li>
            
            
             <li>
                <div class="user-container" flex="main:left cross:center">
                    <img src="./static/images/imgdemo/imguser.jpg" />
                    <span class="nickname">你比想象的自由</span>
                </div>
                <div class="title">家里人不理解自己怎么办？</div>
                <div class="content">
                    <p>总是觉得家里人不支持自己，不知道该怎么办，我不知道该怎么办？求解答？</p>
                    <div class="pic-list" flex="main:left cross:center">
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                    </div>
                </div>
                <div class="count-container clearfix">
                    <span class="fl">今天10:20 · 亲情</span>
                    <span class="fr">
                        <a href="javascript:;">                    
                            <i class="icon-look"></i>                        
                            <span>28</span>                                           
                        </a> 
                        <a href="javascript:;">                    
                            <i class="icon-comment"></i>                        
                            <span>45</span>                                           
                        </a>     
                        <a href="javascript:;" style="margin-right: 0px;">                    
                            <i class="icon-xin"></i>                        
                            <span>32</span>                                           
                        </a>     
                    </span>
                </div>
            </li>
            
            
             <li>
                <div class="user-container" flex="main:left cross:center">
                    <img src="./static/images/imgdemo/imguser.jpg" />
                    <span class="nickname">你比想象的自由</span>
                </div>
                <div class="title">家里人不理解自己怎么办？</div>
                <div class="content">
                    <p>总是觉得家里人不支持自己，不知道该怎么办，我不知道该怎么办？求解答？</p>
                    <div class="pic-list" flex="main:left cross:center">
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                         <img src="./static/images/imgdemo/list.png" />
                    </div>
                </div>
                <div class="count-container clearfix">
                    <span class="fl">今天10:20 · 亲情</span>
                    <span class="fr">
                        <a href="javascript:;">                    
                            <i class="icon-look"></i>                        
                            <span>28</span>                                           
                        </a> 
                        <a href="javascript:;">                    
                            <i class="icon-comment"></i>                        
                            <span>45</span>                                           
                        </a>     
                        <a href="javascript:;" style="margin-right: 0px;">                    
                            <i class="icon-xin"></i>                        
                            <span>32</span>                                           
                        </a>     
                    </span>
                </div>
            </li>
            
            
            
        </ul>
    </section>
    
    <a class="position-create" href="#"></a>
  
</div>

<script id="tpl-saerch" type="text/html">
<section class="q-search">
	<header>
		<a class="close" onclick="layer.closeAll()"></a>
                <form method="post" action="" id="form">
			<div class="input">
			<input id="keyword" type="search" placeholder="搜索相关话题" />
			</div>
		</form>
	</header>
</section>
</script>



<div class="copyright">
    <div class="logo"></div>
    <a href="http://www.bcreat.com/App">北创奇迹技术支持</a>
</div>
<script src="static/plugins/jquery/jquery.min.js"></script>
<script src="static/plugins/lazyload/jquery.lazyload.js"></script>
<script src="static/plugins/fastclick/fastclick.js"></script>
<script src="static/plugins/layer/layer.js"></script>
<script src="static/js/adaptation.js"></script>
<script src="static/plugins/less/less.min.js"></script>
<script type="text/javascript">
    $(function() {  
        FastClick.attach(document.body);//解决部分手机点击事件延迟
          //图片赖加载
        $(".list img").lazyload({
            effect: 'fadeIn',
        });
    });  
    //搜索
    $('#search').click(function(){
            layer.open({
              type: 1
              ,content: $('#tpl-saerch').html()
              ,anim: 'bottom'
              ,style: 'position:absolute;left:0;max-width:640px;top:0; width:100%; height:100%; border: none; -webkit-animation-duration: .5s;background:rgba(255,255,255,0.95); animation-duration: .5s;'
            });
            $('#keyword').focus();
            searchForm();
    });
    
    $("#top_menu a").click(function(){
         $(this).addClass("cur").siblings().removeClass("cur");
         list(1);
    });
    
    var type   = 1,
	list   = [],
        url = "",
	page   = 1;	
	
	
    list = function(p,keyword){

            p = p?p:page;
            if(!p) return;

            var type = $('#top_menu a.cur').data('id');

            //tpl	
            $.ajax({
                    url 	 : url,
                    data	 : {p:p,type:type,keyword:keyword},
                    dataType : 'json',
                    async	 : false,
                    success  : function(data){
                            page = data.page;
                            //渲染数据 
                    }
            });
    };
    $(window).scroll(function () {
            var lastHeight = $('.list li').last().height()+50;
            if ((lastHeight + $(window).scrollTop()) >= ($(document).height() - $(window).height())) {
                    list();
            }
    });
    function searchForm(){
        var keyword = $("#keyword").val();
         $("#form").submit(function(e){
             
            list(page,keyword);
            return false;
        });
       
    }
   
    list(1);
</script>
</body>
</html>
